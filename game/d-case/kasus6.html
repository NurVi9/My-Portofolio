<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misteri Pembunuhan di Kereta Api Ekspres - Game Detektif</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --dark-bg: #1a1a2e;
            --light-bg: #16213e;
            --accent: #e94560;
            --text: #f1f1f1;
            --paper: #f0e6d2;
            --highlight: #ffd166;
            --success: #4caf50;
            --danger: #f44336;
            --warning: #ff9800;
            --purple: #6a0dad;
            --train-color: #8c6b3f;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTAgMGg1MHY1MEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xMCAxMGg0TTEwIDE1aDRNMTAgMjBoNE0xMCAyNmg0TTEwIDMxaDRNMTAgMzZoNE0xMCA0MWg0TTI2IDEwaDRNMjYgMTVoNE0yNiAyMGg0TTI2IDI2aDRNMjYgMzFoNE0yNiAzNmg0TTI2IDQxaDRNNDIgMTBoNE00MiAxNmg0TTQyIDIwaDQ0NDIgMjZoNE00MiAzMWg0TTQyIDM2aDRNNDIgNDFoNCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEiLz48L3N2Zz4=');
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 20px;
            margin-bottom: 30px;
            position: relative;
        }
        
        h1 {
            color: var(--accent);
            font-size: 2.8rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }
        
        .subtitle {
            font-style: italic;
            color: var(--highlight);
            margin-bottom: 20px;
        }
        
        .game-screen {
            display: none;
            background-color: var(--light-bg);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
            border: 1px solid rgba(233, 69, 96, 0.3);
            animation: fadeIn 0.5s ease;
        }
        
        #welcome-screen {
            display: block;
            text-align: center;
            background: linear-gradient(to bottom, rgba(22, 33, 62, 0.9), rgba(26, 26, 46, 0.9));
            position: relative;
            overflow: hidden;
            padding: 40px;
        }
        
        #welcome-screen::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTAgMGg2MHY2MEgweiIgZmlsbD0ibm9uZSIvPjxyZWN0IHg9IjEwIiB5PSIxMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBzdHJva2U9IiNlOTQ1NjAiIHN0cm9rZS13aWR0aD0iMC41IiBmaWxsPSJub25lIi8+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMTAiIHN0cm9rZT0iI2U5NDU2MCIgc3Ryb2tlLXdpZHRoPSIwLjUiIGZpbGw9Im5vbmUiLz48L3N2Zz4=');
            z-index: -1;
        }
        
        .btn {
            background: linear-gradient(to bottom, var(--accent), #c53d54);
            color: var(--text);
            border: none;
            padding: 14px 28px;
            margin: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            z-index: 1;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #c53d54, var(--accent));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        
        .btn:hover::before {
            opacity: 1;
        }
        
        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .btn-secondary {
            background: linear-gradient(to bottom, #6c757d, #5a6268);
        }
        
        .btn-success {
            background: linear-gradient(to bottom, var(--success), #3d8b40);
        }
        
        .btn-danger {
            background: linear-gradient(to bottom, var(--danger), #d32f2f);
        }
        
        .note-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
            gap: 15px;
        }
        
        .note {
            background-color: var(--paper);
            color: #333;
            padding: 18px;
            border-radius: 8px;
            width: 220px;
            min-height: 120px;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
            transform: rotate(-1deg);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .note::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--accent), transparent);
        }
        
        .note:hover {
            transform: rotate(0deg) scale(1.05);
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .note h3 {
            color: #2c3e50;
            margin-bottom: 8px;
            border-bottom: 1px dashed #aaa;
            padding-bottom: 5px;
        }
        
        .note p {
            font-size: 0.9rem;
            flex-grow: 1;
        }
        
        .character-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .character {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            position: relative;
        }
        
        .character:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .character-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent);
            margin: 0 auto 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, var(--purple) 0%, var(--train-color) 100%);
        }
        
        .character:hover .character-img {
            border-color: var(--highlight);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .character h3 {
            margin-bottom: 5px;
            color: var(--accent);
        }
        
        .character p {
            font-size: 0.9rem;
            color: #ccc;
        }
        
        .dialog-box {
            background-color: var(--paper);
            color: #333;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            position: relative;
            box-shadow: 3px 3px 12px rgba(0, 0, 0, 0.2);
            border-left: 5px solid var(--accent);
        }
        
        .dialog-box::before {
            content: """;
            position: absolute;
            top: -25px;
            left: 15px;
            font-size: 80px;
            color: var(--accent);
            font-family: Georgia, serif;
            opacity: 0.3;
        }
        
        .dialog-options {
            margin-top: 20px;
        }
        
        .dialog-option {
            display: block;
            background-color: var(--light-bg);
            color: var(--text);
            padding: 12px 15px;
            margin: 10px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .dialog-option:hover {
            background-color: var(--accent);
            padding-left: 20px;
            border-left: 3px solid var(--highlight);
        }
        
        .clue-list {
            list-style-type: none;
            padding: 0;
        }
        
        .clue-list li {
            background-color: rgba(255, 255, 255, 0.05);
            margin: 10px 0;
            padding: 15px;
            border-left: 3px solid var(--accent);
            border-radius: 5px;
            transition: all 0.3s;
            background: linear-gradient(to right, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.1));
            display: flex;
            align-items: center;
        }
        
        .clue-list li i {
            margin-right: 10px;
            color: var(--accent);
        }
        
        .clue-list li:hover {
            background: linear-gradient(to right, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.15));
            border-left: 3px solid var(--highlight);
        }
        
        #accuse-screen select, #accuse-screen textarea {
            width: 100%;
            padding: 12px;
            margin: 12px 0;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--accent);
            color: var(--text);
            border-radius: 6px;
            font-family: inherit;
        }
        
        #accuse-screen select:focus, #accuse-screen textarea:focus {
            outline: none;
            border-color: var(--highlight);
            box-shadow: 0 0 8px rgba(255, 209, 102, 0.5);
        }
        
        .progress-container {
            margin: 25px 0;
        }
        
        .progress-bar {
            height: 12px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            margin: 15px 0;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--accent), var(--highlight));
            width: 0%;
            transition: width 0.5s;
        }
        
        .result-content {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border-left: 5px solid var(--accent);
        }
        
        .inventory {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        
        .inventory-item {
            background: linear-gradient(135deg, var(--purple) 0%, var(--train-color) 100%);
            width: 70px;
            height: 70px;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .inventory-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4);
        }
        
        .inventory-item span {
            position: absolute;
            bottom: 5px;
            font-size: 0.7rem;
            text-align: center;
            width: 100%;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        .typewriter {
            overflow: hidden;
            border-right: 0.15em solid var(--accent);
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: 0.15em;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--accent) }
        }
        
        .fade-in {
            animation: fadeIn 0.8s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 140px;
            background-color: var(--dark-bg);
            color: var(--text);
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -70px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .crime-scene {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(0,0,0,0.1));
            border-radius: 10px;
            border-left: 5px solid var(--highlight);
        }
        
        .crime-scene img {
            max-width: 100%;
            border-radius: 8px;
            margin-top: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--light-bg);
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            font-size: 1.2rem;
            color: var(--highlight);
            border: 1px solid var(--accent);
            z-index: 100;
        }
        
        .hint-system {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .hint-btn-circle {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }
        
        .hint-btn-circle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }
        
        .hint-count-badge {
            background: var(--highlight);
            color: var(--dark-bg);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        @media (max-width: 768px) {
            .note {
                width: 100%;
                margin: 10px 0;
            }
            
            .character {
                width: 100%;
                margin: 10px 0;
            }
            
            .character-img {
                width: 100px;
                height: 100px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .btn {
                width: 100%;
                margin: 8px 0;
            }
            
            .navigation {
                flex-direction: column;
            }
            
            .timer, .hint-system {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
                text-align: center;
            }
            
            .hint-btn-circle {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Misteri Pembunuhan di Kereta Api Ekspres</h1>
            <p class="subtitle">Seorang Pengusaha Ditemukan Tewas di Dalam Kabin - Bisakah Anda Memecahkan Kasus Ini?</p>
        </header>
        
        <div class="timer" id="timer-container">
            <i class="fas fa-clock"></i> Waktu: <span id="timer">60:00</span>
        </div>
        
        <div class="hint-system" id="hint-system" style="display: none;">
            <div class="hint-btn-circle" id="use-hint">
                <i class="fas fa-lightbulb"></i>
            </div>
            <div class="hint-count-badge" id="hint-count">3</div>
        </div>
        
        <!-- Layar Selamat Datang -->
        <div id="welcome-screen" class="game-screen fade-in">
            <h2 class="typewriter">Selamat Datang, Detektif</h2>
            <div class="crime-scene">
                <p>Di tengah perjalanan Kereta Api Ekspres "Java Express" dari Jakarta ke Surabaya, seorang pengusaha kaya, Mr. Jonathan Hartono, ditemukan tewas di dalam kabinnya. Kereta masih melanjutkan perjalanan, yang berarti pelaku masih berada di dalam kereta.</p>
                <p>Korban terakhir terlihat hidup sekitar pukul 22.30, dan jenazahnya ditemukan oleh pramugara pukul 23.15. Pintu kabin terkunci dari dalam, dan hanya ada sedikit petunjuk tentang apa yang terjadi.</p>
                <p>Sebagai detektif terbaik, Anda ditugaskan untuk menyelidiki kasus ini. Wawancarai para penumpang dan awak kereta, kumpulkan bukti, dan temukan pembunuh sebelum kereta tiba di stasiun tujuan!</p>
            </div>
            <button id="start-btn" class="btn pulse"><i class="fas fa-play"></i> Mulai Investigasi</button>
        </div>
        
        <!-- Layar Lokasi -->
        <div id="location-screen" class="game-screen">
            <h2><i class="fas fa-map-marker-alt"></i> Pilih Lokasi untuk Diselidiki</h2>
            <div class="note-container">
                <div class="note" data-location="victim-cabin">
                    <h3>Kabin Korban</h3>
                    <p>Kabin B12 tempat jenazah Mr. Hartono ditemukan. Terkunci dari dalam.</p>
                </div>
                <div class="note" data-location="dining-car">
                    <h3>Gerbong Makan</h3>
                    <p>Tempat para penumpang makan dan berkumpul. Korban terakhir terlihat di sini.</p>
                </div>
                <div class="note" data-location="luggage-car">
                    <h3>Gerbong Bagasi</h3>
                    <p>Penyimpanan bagasi penumpang. Terdapat beberapa barang mencurigakan.</p>
                </div>
                <div class="note" data-location="conductor-room">
                    <h3>Ruang Kondektur</h3>
                    <p>Ruang kerja staf kereta. Terdapat logbook dan dokumen perjalanan.</p>
                </div>
            </div>
            
            <h3><i class="fas fa-clipboard-list"></i> Inventaris Bukti</h3>
            <div class="inventory" id="inventory">
                <!-- Inventory items will be added here dynamically -->
            </div>
            
            <div class="navigation">
                <button id="to-suspects-btn" class="btn"><i class="fas fa-users"></i> Wawancara Tersangka</button>
                <button id="to-accuse-btn" class="btn"><i class="fas fa-gavel"></i> Buat Kesimpulan</button>
                <button id="to-clues-btn" class="btn"><i class="fas fa-search"></i> Lihat Bukti</button>
            </div>
        </div>
        
        <!-- Layar Tersangka -->
        <div id="suspects-screen" class="game-screen">
            <h2><i class="fas fa-users"></i> Wawancara Tersangka</h2>
            <div class="character-grid">
                <div class="character" data-suspect="wife">
                    <div class="tooltip">
                        <div class="character-img">S</div>
                        <span class="tooltiptext">Istri Korban</span>
                    </div>
                    <h3>Sandra Hartono</h3>
                    <p>Istri Jonathan - Ahli Waris Utama</p>
                </div>
                <div class="character" data-suspect="business">
                    <div class="tooltip">
                        <div class="character-img">B</div>
                        <span class="tooltiptext">Rekan Bisnis</span>
                    </div>
                    <h3>Budi Santoso</h3>
                    <p>Rekan Bisnis - Sedang Bermasalah dengan Korban</p>
                </div>
                <div class="character" data-suspect="assistant">
                    <div class="tooltip">
                        <div class="character-img">A</div>
                        <span class="tooltiptext">Asisten Pribadi</span>
                    </div>
                    <h3>Andini Wijaya</h3>
                    <p>Asisten Pribadi - Mengatur Jadwal Korban</p>
                </div>
                <div class="character" data-suspect="conductor">
                    <div class="tooltip">
                        <div class="character-img">K</div>
                        <span class="tooltiptext">Kondektur Kereta</span>
                    </div>
                    <h3>Karno</h3>
                    <p>Kondektur - Bertanggung Jawab atas Keamanan</p>
                </div>
            </div>
            
            <div class="navigation">
                <button id="to-locations-btn" class="btn"><i class="fas fa-map-marker-alt"></i> Selidiki Lokasi</button>
                <button id="to-accuse-from-suspects" class="btn"><i class="fas fa-gavel"></i> Buat Kesimpulan</button>
                <button id="to-clues-from-suspects" class="btn"><i class="fas fa-search"></i> Lihat Bukti</button>
            </div>
        </div>
        
        <!-- Layar Dialog -->
        <div id="dialog-screen" class="game-screen">
            <h2 id="dialog-character-name"><i class="fas fa-comment"></i> Wawancara</h2>
            <div class="dialog-box">
                <p id="dialog-text">Halo, Detektif. Ada yang bisa saya bantu dengan penyelidikan Anda?</p>
                <div class="dialog-options" id="dialog-options">
                    <!-- Opsi dialog akan dimasukkan di sini oleh JavaScript -->
                </div>
            </div>
            <button id="end-dialog-btn" class="btn"><i class="fas fa-arrow-left"></i> Kembali ke Daftar Tersangka</button>
        </div>
        
        <!-- Layar Investigasi -->
        <div id="investigate-screen" class="game-screen">
            <h2 id="location-name"><i class="fas fa-search"></i> Investigasi Lokasi</h2>
            <div id="location-description">
                <p>Anda sedang memeriksa lokasi ini. Apa yang ingin Anda lakukan?</p>
            </div>
            <div id="investigation-options">
                <!-- Opsi investigasi akan dimasukkan di sini oleh JavaScript -->
            </div>
            <button id="back-to-locations" class="btn"><i class="fas fa-arrow-left"></i> Kembali ke Daftar Lokasi</button>
        </div>
        
        <!-- Layar Bukti -->
        <div id="clues-screen" class="game-screen">
            <h2><i class="fas fa-search"></i> Bukti yang Dikumpulkan</h2>
            
            <div class="progress-container">
                <p>Tingkat Penyelesaian Investigasi:</p>
                <div class="progress-bar">
                    <div class="progress" id="progress-bar"></div>
                </div>
                <p id="progress-text">0%</p>
            </div>
            
            <ul class="clue-list" id="clue-list">
                <!-- Daftar bukti akan dimasukkan di sini oleh JavaScript -->
            </ul>
            <button id="back-from-clues" class="btn"><i class="fas fa-arrow-left"></i> Kembali</button>
        </div>
        
        <!-- Layar Kesimpulan -->
        <div id="accuse-screen" class="game-screen">
            <h2><i class="fas fa-gavel"></i> Buat Kesimpulan</h2>
            <p>Setelah mengumpulkan semua bukti, siapa menurut Anda pembunuh sebenarnya?</p>
            
            <label for="suspect-select">Pilih Tersangka:</label>
            <select id="suspect-select">
                <option value="">-- Pilih Tersangka --</option>
                <option value="wife">Sandra Hartono (Istri)</option>
                <option value="business">Budi Santoso (Rekan Bisnis)</option>
                <option value="assistant">Andini Wijaya (Asisten)</option>
                <option value="conductor">Karno (Kondektur)</option>
            </select>
            
            <label for="motive-text">Jelaskan Motif:</label>
            <textarea id="motive-text" rows="4" placeholder="Mengapa dia membunuh Jonathan Hartono?"></textarea>
            
            <label for="evidence-text">Jelaskan Bukti:</label>
            <textarea id="evidence-text" rows="4" placeholder="Bukti apa yang mendukung kesimpulan Anda?"></textarea>
            
            <div class="navigation">
                <button id="submit-accusation" class="btn btn-success"><i class="fas fa-check"></i> Ajukan Kesimpulan</button>
                <button id="back-from-accuse" class="btn"><i class="fas fa-arrow-left"></i> Kembali</button>
            </div>
        </div>
        
        <!-- Layar Hasil -->
        <div id="result-screen" class="game-screen">
            <h2 id="result-title"><i class="fas fa-trophy"></i> Hasil Investigasi</h2>
            <div id="result-content" class="result-content">
                <p>Terima kasih telah menyelesaikan investigasi.</p>
            </div>
            <button id="restart-btn" class="btn pulse"><i class="fas fa-redo"></i> Main Lagi</button>
        </div>
    </div>

    <script>
        // Data game
        const gameData = {
            currentScreen: 'welcome',
            previousScreen: 'welcome',
            collectedClues: [],
            currentCharacter: null,
            currentLocation: null,
            conversationsHad: {
                wife: false,
                business: false,
                assistant: false,
                conductor: false
            },
            locationsVisited: {
                'victim-cabin': false,
                'dining-car': false,
                'luggage-car': false,
                'conductor-room': false
            },
            culprit: 'assistant', // Asisten adalah pelakunya
            timer: 60 * 60, // 60 menit dalam detik
            timerInterval: null,
            hints: 3,
            solution: {
                motive: "Andini membunuh Jonathan karena dia mengetahui bahwa Jonathan akan memecatnya setelah menemukan bahwa Andini telah menggelapkan uang perusahaan. Andini juga mengetahui bahwa Jonathan sedang menyiapkan perubahan surat wasiat yang tidak menguntungkannya.",
                evidence: [
                    "Catatan transfer uang ilegal yang disembunyikan di tas Andini",
                    "Kunci master kabin yang dicuri dari ruang kondektur",
                    "Sarung tangan dengan residu racun yang ditemukan di tempat sampah gerbong makan",
                    "Pesan teks kepada seorang kolega tentang rencana 'penyelesaian masalah' dengan Jonathan"
                ]
            },
            characters: {
                wife: {
                    name: "Sandra Hartono",
                    relationship: "Istri Korban",
                    dialogs: [
                        {
                            question: "Apa yang Anda lakukan malam ini?",
                            answer: "Saya sedang di gerbong makan sampai sekitar pukul 22.00, lalu kembali ke kabin kami untuk beristirahat. Jonathan mengatakan dia akan menyusul tapi tidak pernah datang."
                        },
                        {
                            question: "Bagaimana hubungan Anda dengan suami Anda?",
                            answer: "Kami sudah menikah 15 tahun. Hubungan kami baik-baik saja, meskipun akhir-akhir ini Jonathan sangat sibuk dengan bisnisnya."
                        },
                        {
                            question: "Apakah Jonathan memiliki musuh?",
                            answer: "Sebagai pengusaha sukses, tentu ada beberapa orang yang iri. Tapi tidak ada yang spesifik yang saya khawatirkan."
                        }
                    ]
                },
                business: {
                    name: "Budi Santoso",
                    relationship: "Rekan Bisnis",
                    dialogs: [
                        {
                            question: "Apa yang Anda lakukan malam ini?",
                            answer: "Saya sedang meeting dengan Jonathan di gerbong makan sampai sekitar pukul 21.30. Pembicaraan kami agak tegang, lalu saya pergi ke kabin saya."
                        },
                        {
                            question: "Apa isi pembicaraan Anda dengan Jonathan?",
                            answer: "Kami membahas masalah keuangan perusahaan. Jonathan ingin menarik diri dari proyek bersama, yang akan membuat saya rugi besar."
                        },
                        {
                            question: "Apakah Anda melihat sesuatu yang mencurigakan?",
                            answer: "Saya melihat Andini, asisten Jonathan, mondar-mandir dengan gelisah di dekat gerbong makan sekitar pukul 22.15."
                        }
                    ]
                },
                assistant: {
                    name: "Andini Wijaya",
                    relationship: "Asisten Pribadi",
                    dialogs: [
                        {
                            question: "Apa yang Anda lakukan malam ini?",
                            answer: "Saya mengatur dokumen untuk meeting besok di kabin saya. Sekitar pukul 22.00, saya mengantarkan beberapa dokumen ke Mr. Hartono di gerbong makan."
                        },
                        {
                            question: "Bagaimana kondisi Jonathan saat terakhir kali bertemu?",
                            answer: "Dia terlihat lelah tapi baik-baik saja. Dia meminta saya mengambilkan kopi sebelum saya kembali ke kabin."
                        },
                        {
                            question: "Apakah ada yang tidak biasa yang Anda lihat?",
                            answer: "Tidak, semuanya tampak normal. Saya shock ketika mendengar berita kematiannya."
                        }
                    ]
                },
                conductor: {
                    name: "Karno",
                    relationship: "Kondektur Kereta",
                    dialogs: [
                        {
                            question: "Apa yang Anda lakukan malam ini?",
                            answer: "Saya melakukan patroli rutin di sepanjang kereta. Sekitar pukul 22.30, saya memeriksa tiket di gerbong 3 dan membantu seorang penumpang yang tua."
                        },
                        {
                            question: "Apakah Anda melihat Jonathan Hartono malam ini?",
                            answer: "Ya, saya melihatnya di gerbong makan sekitar pukul 21.45. Dia sedang berbicara dengan seseorang yang saya tidak kenal."
                        },
                        {
                            question: "Apakah ada hal mencurigakan yang Anda lihat?",
                            answer: "Saya melihat seseorang yang terburu-buru meninggalkan area kabin eksekutif sekitar pukul 22.45, tapi saya tidak bisa melihat wajahnya dengan jelas."
                        }
                    ]
                }
            },
            locations: {
                'victim-cabin': {
                    name: "Kabin Korban",
                    description: "Kabin mewah dengan tempat tidur single, meja kecil, dan lemari. Jenazah Jonathan Hartono terbaring di tempat tidur dengan wajah pucat. Ada cangkir kopi di atas meja dan dokumen yang berserakan.",
                    clues: [
                        {
                            name: "Cangkir Kopi",
                            description: "Cangkir kopi dengan sisa cairan coklat. Tercium bauh almond yang mencurigakan. Kemungkinan besar beracun.",
                            found: false,
                            icon: "fas fa-mug-hot"
                        },
                        {
                            name: "Catatan Diary",
                            description: "Buku harian Jonathan dengan entri terakhir tentang kecurigaannya terhadap penggelapan uang di perusahaannya.",
                            found: false,
                            icon: "fas fa-book"
                        }
                    ]
                },
                'dining-car': {
                    name: "Gerbong Makan",
                    description: "Gerbong makan elegan dengan meja-meja berhiaskan taplak putih dan pelayanan prima. Beberapa penumpang masih duduk dan berbincang meski sudah larut.",
                    clues: [
                        {
                            name: "Reservasi Meja",
                            description: "Buku reservasi menunjukkan Jonathan duduk di meja 4 dari pukul 20.00 hingga 21.30 bersama Budi Santoso.",
                            found: false,
                            icon: "fas fa-utensils"
                        },
                        {
                            name: "Sarung tangan",
                            description: "Sarung tangan lateks ditemukan di tempat sampah dekat pintu. Ada bercak putih di ujung jarinya.",
                            found: false,
                            icon: "fas fa-hand-paper"
                        }
                    ]
                },
                'luggage-car': {
                    name: "Gerbong Bagasi",
                    description: "Gerbong bagasi yang penuh dengan koper dan barang-barang penumpang. Beberapa barang tampak tidak sesuai dengan tag nama.",
                    clues: [
                        {
                            name: "Tas Misterius",
                            description: "Tas hitam tanpa tag nama berisi dokumen keuangan dan catatan transfer ke rekening tidak dikenal.",
                            found: false,
                            icon: "fas fa-briefcase"
                        },
                        {
                            name: "Kunci Master",
                            description: "Kunci master kabin yang seharusnya hanya dimiliki oleh staf kereta. Ditemukan tersembunyi di balik sebuah koper.",
                            found: false,
                            icon: "fas fa-key"
                        }
                    ]
                },
                'conductor-room': {
                    name: "Ruang Kondektur",
                    description: "Ruang kerja kecil berisi meja, kursi, dan berbagai dokumen operasional kereta. Terdapat logbook perjalanan dan daftar penumpang.",
                    clues: [
                        {
                            name: "Logbook Perjalanan",
                            description: "Catatan perjalanan kereta yang mencatat semua kejadian penting. Ada entri tentang keluhan kabin terkunci dari dalam pukul 23.15.",
                            found: false,
                            icon: "fas fa-clipboard-list"
                        },
                        {
                            name: "Daftar Penumpang",
                            description: "Daftar lengkap penumpang dan awak kereta. Terdapat catatan tentang seorang penumpang yang memesan tiket secara mendadak.",
                            found: false,
                            icon: "fas fa-list"
                        }
                    ]
                }
            }
        };

        // Elemen DOM
        const screens = {
            welcome: document.getElementById('welcome-screen'),
            location: document.getElementById('location-screen'),
            suspects: document.getElementById('suspects-screen'),
            dialog: document.getElementById('dialog-screen'),
            investigate: document.getElementById('investigate-screen'),
            clues: document.getElementById('clues-screen'),
            accuse: document.getElementById('accuse-screen'),
            result: document.getElementById('result-screen')
        };

        // Inisialisasi game
        function initGame() {
            // Event listeners untuk navigasi
            document.getElementById('start-btn').addEventListener('click', () => {
                showScreen('location');
                startTimer();
                // Tampilkan tombol petunjuk setelah permainan dimulai
                document.getElementById('hint-system').style.display = 'flex';
            });
            
            document.getElementById('to-suspects-btn').addEventListener('click', () => {
                gameData.previousScreen = gameData.currentScreen;
                showScreen('suspects');
            });
            
            document.getElementById('to-accuse-btn').addEventListener('click', () => {
                gameData.previousScreen = gameData.currentScreen;
                showScreen('accuse');
            });
            
            document.getElementById('to-clues-btn').addEventListener('click', () => {
                gameData.previousScreen = gameData.currentScreen;
                showScreen('clues');
            });
            
            document.getElementById('to-locations-btn').addEventListener('click', () => {
                gameData.previousScreen = gameData.currentScreen;
                showScreen('location');
            });
            
            document.getElementById('to-accuse-from-suspects').addEventListener('click', () => {
                gameData.previousScreen = gameData.currentScreen;
                showScreen('accuse');
            });
            
            document.getElementById('to-clues-from-suspects').addEventListener('click', () => {
                gameData.previousScreen = gameData.currentScreen;
                showScreen('clues');
            });
            
            document.getElementById('back-from-clues').addEventListener('click', () => {
                showScreen(gameData.previousScreen);
            });
            
            document.getElementById('back-from-accuse').addEventListener('click', () => {
                showScreen(gameData.previousScreen);
            });
            
            document.getElementById('end-dialog-btn').addEventListener('click', () => showScreen('suspects'));
            document.getElementById('back-to-locations').addEventListener('click', () => showScreen('location'));
            document.getElementById('submit-accusation').addEventListener('click', checkAccusation);
            document.getElementById('restart-btn').addEventListener('click', restartGame);
            document.getElementById('use-hint').addEventListener('click', useHint);
            
            // Event listeners untuk karakter
            document.querySelectorAll('.character').forEach(el => {
                el.addEventListener('click', () => {
                    const suspect = el.getAttribute('data-suspect');
                    startConversation(suspect);
                });
            });
            
            // Event listeners untuk lokasi
            document.querySelectorAll('.note[data-location]').forEach(el => {
                el.addEventListener('click', () => {
                    const location = el.getAttribute('data-location');
                    investigateLocation(location);
                });
            });
            
            // Perbarui progress bar
            updateProgressBar();
            updateInventory();
            updateHints();
        }

        // Tampilkan layar tertentu
        function showScreen(screenName) {
            // Sembunyikan semua layar
            Object.values(screens).forEach(screen => {
                screen.style.display = 'none';
            });
            
            // Tampilkan layar yang diminta
            screens[screenName].style.display = 'block';
            gameData.currentScreen = screenName;
            
            // Jika layar bukti, perbarui daftar bukti
            if (screenName === 'clues') {
                updateCluesList();
            }
            
            // Jika layar lokasi, perbarui inventaris
            if (screenName === 'location') {
                updateInventory();
            }
        }

        // Mulai percakapan dengan karakter
        function startConversation(suspectId) {
            gameData.currentCharacter = suspectId;
            const character = gameData.characters[suspectId];
            
            // Set nama karakter di dialog
            document.getElementById('dialog-character-name').textContent = `Wawancara dengan ${character.name}`;
            
            // Kosongkan opsi dialog
            const optionsContainer = document.getElementById('dialog-options');
            optionsContainer.innerHTML = '';
            
            // Tambahkan opsi dialog
            character.dialogs.forEach(dialog => {
                const optionEl = document.createElement('div');
                optionEl.className = 'dialog-option';
                optionEl.innerHTML = `<i class="fas fa-question"></i> ${dialog.question}`;
                optionEl.addEventListener('click', () => {
                    document.getElementById('dialog-text').textContent = dialog.answer;
                    
                    // Jika ini pertama kalinya berbicara dengan karakter ini, dapatkan petunjuk
                    if (!gameData.conversationsHad[suspectId]) {
                        gameData.conversationsHad[suspectId] = true;
                        
                        // Berikan petunjuk khusus berdasarkan karakter
                        let newClue = '';
                        if (suspectId === 'wife') {
                            newClue = 'Sandra mengatakan Jonathan tidak kembali ke kabin setelah pertemuan di gerbong makan';
                        } else if (suspectId === 'business') {
                            newClue = 'Budi mengaku memiliki pertemuan tegang dengan Jonathan malam itu';
                        } else if (suspectId === 'assistant') {
                            newClue = 'Andini mengantarkan dokumen dan kopi untuk Jonathan sebelum kematiannya';
                        } else if (suspectId === 'conductor') {
                            newClue = 'Karno melihat seseorang terburu-buru meninggalkan area kabin eksekutif';
                        }
                        
                        if (newClue && !gameData.collectedClues.includes(newClue)) {
                            gameData.collectedClues.push(newClue);
                            updateProgressBar();
                            updateInventory();
                        }
                    }
                });
                
                optionsContainer.appendChild(optionEl);
            });
            
            showScreen('dialog');
        }

        // Investigasi lokasi
        function investigateLocation(locationId) {
            gameData.currentLocation = locationId;
            const location = gameData.locations[locationId];
            
            // Set nama lokasi
            document.getElementById('location-name').textContent = `Menyelidiki: ${location.name}`;
            
            // Set deskripsi lokasi
            document.getElementById('location-description').innerHTML = `<p>${location.description}</p>`;
            
            // Kosongkan opsi investigasi
            const optionsContainer = document.getElementById('investigation-options');
            optionsContainer.innerHTML = '';
            
            // Tambahkan opsi investigasi berdasarkan petunjuk yang tersedia
            location.clues.forEach((clue, index) => {
                if (!clue.found) {
                    const optionEl = document.createElement('div');
                    optionEl.className = 'dialog-option';
                    optionEl.innerHTML = `<i class="${clue.icon}"></i> Periksa: ${clue.name}`;
                    optionEl.addEventListener('click', () => {
                        // Tandai petunjuk sebagai ditemukan
                        gameData.locations[locationId].clues[index].found = true;
                        
                        // Tambahkan ke koleksi petunjuk
                        gameData.collectedClues.push(`${clue.name}: ${clue.description}`);
                        
                        // Perbarui UI
                        updateProgressBar();
                        updateInventory();
                        optionEl.style.display = 'none';
                        
                        // Tandai lokasi telah dikunjungi
                        gameData.locationsVisited[locationId] = true;
                    });
                    
                    optionsContainer.appendChild(optionEl);
                }
            });
            
            showScreen('investigate');
        }

        // Perbarui daftar bukti
        function updateCluesList() {
            const cluesList = document.getElementById('clue-list');
            cluesList.innerHTML = '';
            
            if (gameData.collectedClues.length === 0) {
                cluesList.innerHTML = '<li>Anda belum menemukan bukti apa pun. Selidiki lokasi dan wawancarai tersangka untuk menemukan bukti.</li>';
                return;
            }
            
            gameData.collectedClues.forEach(clue => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-clue"></i> ${clue}`;
                cluesList.appendChild(li);
            });
        }

        // Perbarui progress bar
        function updateProgressBar() {
            const totalClues = 12; // Total semua petunjuk yang mungkin
            const progress = (gameData.collectedClues.length / totalClues) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${Math.round(progress)}%`;
        }

        // Perbarui inventaris
        function updateInventory() {
            const inventory = document.getElementById('inventory');
            inventory.innerHTML = '';
            
            if (gameData.collectedClues.length === 0) {
                inventory.innerHTML = '<p>Inventaris kosong. Kumpulkan bukti untuk mengisi inventaris.</p>';
                return;
            }
            
            // Batasi tampilan inventaris hingga 8 item terakhir
            const recentClues = gameData.collectedClues.slice(-8);
            
            recentClues.forEach(clue => {
                const item = document.createElement('div');
                item.className = 'inventory-item';
                
                // Ambil ikon berdasarkan jenis petunjuk
                let icon = 'fas fa-clue';
                if (clue.includes('Cangkir')) icon = 'fas fa-mug-hot';
                else if (clue.includes('Catatan')) icon = 'fas fa-book';
                else if (clue.includes('Reservasi')) icon = 'fas fa-utensils';
                else if (clue.includes('Sarung')) icon = 'fas fa-hand-paper';
                else if (clue.includes('Tas')) icon = 'fas fa-briefcase';
                else if (clue.includes('Kunci')) icon = 'fas fa-key';
                else if (clue.includes('Logbook')) icon = 'fas fa-clipboard-list';
                else if (clue.includes('Daftar')) icon = 'fas fa-list';
                
                // Ambil nama pendek untuk petunjuk
                const clueName = clue.split(':')[0];
                const shortName = clueName.length > 10 ? clueName.substring(0, 10) + '...' : clueName;
                
                item.innerHTML = `<i class="${icon}"></i><span>${shortName}</span>`;
                inventory.appendChild(item);
            });
        }

        // Perbarui tampilan petunjuk
        function updateHints() {
            document.getElementById('hint-count').textContent = gameData.hints;
        }

        // Gunakan petunjuk
        function useHint() {
            if (gameData.hints > 0) {
                gameData.hints--;
                updateHints();
                
                // Berikan petunjuk acak yang belum ditemukan
                const allClues = getAllClues();
                const undiscoveredClues = allClues.filter(clue => 
                    !gameData.collectedClues.some(c => c.includes(clue.name))
                );
                
                if (undiscoveredClues.length > 0) {
                    const randomClue = undiscoveredClues[Math.floor(Math.random() * undiscoveredClues.length)];
                    alert(`Petunjuk: Periksa ${randomClue.location} untuk ${randomClue.name}`);
                } else {
                    alert("Anda sudah menemukan semua petunjuk yang tersedia!");
                }
            } else {
                alert("Anda tidak memiliki petunjuk lagi!");
            }
        }

        // Dapatkan semua petunjuk yang mungkin
        function getAllClues() {
            const clues = [];
            for (const location in gameData.locations) {
                gameData.locations[location].clues.forEach(clue => {
                    clues.push({
                        name: clue.name,
                        location: gameData.locations[location].name
                    });
                });
            }
            return clues;
        }

        // Mulai timer
        function startTimer() {
            clearInterval(gameData.timerInterval);
            
            gameData.timerInterval = setInterval(() => {
                gameData.timer--;
                
                const minutes = Math.floor(gameData.timer / 60);
                const seconds = gameData.timer % 60;
                
                document.getElementById('timer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (gameData.timer <= 0) {
                    clearInterval(gameData.timerInterval);
                    showScreen('result');
                    document.getElementById('result-title').textContent = 'Waktu Habis!';
                    document.getElementById('result-content').innerHTML = `
                        <p>Maaf, waktu investigasi Anda telah habis. Kereta telah tiba di stasiun tujuan dan pelaku berhasil melarikan diri.</p>
                        <p>Anda berhasil mengumpulkan ${gameData.collectedClues.length} dari 12 bukti yang mungkin.</p>
                        <p>Silakan coba lagi untuk memecahkan kasus ini!</p>
                    `;
                }
            }, 1000);
        }

        // Periksa kesimpulan pemain
        function checkAccusation() {
            const selectedSuspect = document.getElementById('suspect-select').value;
            const motive = document.getElementById('motive-text').value;
            const evidence = document.getElementById('evidence-text').value;
            
            if (!selectedSuspect || !motive || !evidence) {
                alert('Harap isi semua field sebelum mengajukan kesimpulan!');
                return;
            }
            
            // Hentikan timer
            clearInterval(gameData.timerInterval);
            
            // Tampilkan layar hasil
            showScreen('result');
            
            if (selectedSuspect === gameData.culprit) {
                document.getElementById('result-title').textContent = 'Selamat! Kasus Terpecahkan';
                document.getElementById('result-content').innerHTML = `
                    <p>Anda benar! ${gameData.characters[gameData.culprit].name} adalah pembunuhnya.</p>
                    <p><strong>Motif:</strong> ${gameData.solution.motive}</p>
                    <p><strong>Bukti-bukti:</strong></p>
                    <ul>
                        ${gameData.solution.evidence.map(ev => `<li>${ev}</li>`).join('')}
                    </ul>
                    <p>Anda berhasil mengumpulkan ${gameData.collectedClues.length} dari 12 bukti yang mungkin.</p>
                    <p>Waktu tersisa: ${Math.floor(gameData.timer / 60)}:${(gameData.timer % 60).toString().padStart(2, '0')}</p>
                `;
            } else {
                document.getElementById('result-title').textContent = 'Kesimpulan Salah';
                document.getElementById('result-content').innerHTML = `
                    <p>Maaf, kesimpulan Anda salah. ${gameData.characters[selectedSuspect].name} bukan pembunuhnya.</p>
                    <p>Silakan main lagi dan periksa bukti-bukti dengan lebih cermat.</p>
                    <p>Anda mengumpulkan ${gameData.collectedClues.length} dari 12 bukti yang mungkin.</p>
                `;
            }
        }

        // Mulai ulang game
        function restartGame() {
            // Hentikan timer
            clearInterval(gameData.timerInterval);
            
            // Reset semua data game
            gameData.collectedClues = [];
            gameData.currentCharacter = null;
            gameData.currentLocation = null;
            gameData.timer = 60 * 60;
            gameData.hints = 3;
            
            // Reset semua percakapan
            for (let key in gameData.conversationsHad) {
                gameData.conversationsHad[key] = false;
            }
            
            // Reset semua kunjungan lokasi
            for (let key in gameData.locationsVisited) {
                gameData.locationsVisited[key] = false;
            }
            
            // Reset semua petunjuk di lokasi
            for (let location in gameData.locations) {
                gameData.locations[location].clues.forEach(clue => {
                    clue.found = false;
                });
            }
            
            // Reset form kesimpulan
            document.getElementById('suspect-select').value = '';
            document.getElementById('motive-text').value = '';
            document.getElementById('evidence-text').value = '';
            
            // Reset timer display
            document.getElementById('timer').textContent = '60:00';
            
            // Sembunyikan tombol petunjuk
            document.getElementById('hint-system').style.display = 'none';
            
            // Kembali ke layar welcome
            showScreen('welcome');
            
            // Perbarui progress bar
            updateProgressBar();
            updateInventory();
            updateHints();
        }

        // Inisialisasi game ketika halaman dimuat
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>