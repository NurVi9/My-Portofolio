<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misteri Mansion - Game Detektif</title>
    <style>
        :root {
            --dark-bg: #1a1a2e;
            --light-bg: #16213e;
            --accent: #e94560;
            --text: #f1f1f1;
            --paper: #f0e6d2;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background-color: var(--dark-bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        h1 {
            color: var(--accent);
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .game-screen {
            display: none;
            background-color: var(--light-bg);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }
        
        #welcome-screen {
            display: block;
            text-align: center;
        }
        
        .btn {
            background-color: var(--accent);
            color: var(--text);
            border: none;
            padding: 12px 25px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background-color: #c53d54;
            transform: translateY(-2px);
        }
        
        .note-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .note {
            background-color: var(--paper);
            color: #333;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
            width: 200px;
            min-height: 100px;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
            transform: rotate(-1deg);
            cursor: pointer;
        }
        
        .character {
            text-align: center;
            margin: 15px;
            cursor: pointer;
        }
        
        .character-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent);
            margin-bottom: 10px;
        }
        
        .dialog-box {
            background-color: var(--paper);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
        }
        
        .dialog-options {
            margin-top: 15px;
        }
        
        .dialog-option {
            display: block;
            background-color: var(--light-bg);
            color: var(--text);
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .clue-list {
            list-style-type: none;
            padding: 0;
        }
        
        .clue-list li {
            background-color: rgba(255, 255, 255, 0.1);
            margin: 8px 0;
            padding: 10px;
            border-left: 3px solid var(--accent);
        }
        
        #accuse-screen select, #accuse-screen textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--accent);
            color: var(--text);
            border-radius: 5px;
        }
        
        .truth-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .truth-table th, .truth-table td {
            border: 1px solid var(--accent);
            padding: 10px;
            text-align: left;
        }
        
        .progress-bar {
            height: 10px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--accent);
            width: 0%;
            transition: width 0.5s;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Misteri Mansion</h1>
            <p>Sebuah Game Teka-Teki Detektif</p>
        </header>
        
        <!-- Layar Selamat Datang -->
        <div id="welcome-screen" class="game-screen">
            <h2>Selamat Datang, Detektif</h2>
            <p>Kita memiliki kasus pembunuhan di Mansion Hartawan. Tuan Richard ditemukan tewas di perpustaannya malam ini.</p>
            <p>Tugas Anda adalah menyelidiki, mewawancarai para tersangka, mengumpulkan bukti, dan memecahkan kasus ini.</p>
            <p>Apakah Anda siap untuk tantangan ini?</p>
            <button id="start-btn" class="btn">Mulai Investigasi</button>
        </div>
        
        <!-- Layar Lokasi -->
        <div id="location-screen" class="game-screen">
            <h2>Pilih Lokasi untuk Diselidiki</h2>
            <div class="note-container">
                <div class="note" data-location="library">
                    <h3>Perpustakaan</h3>
                    <p>Tempat jenazah ditemukan</p>
                </div>
                <div class="note" data-location="study">
                    <h3>Ruang Kerja</h3>
                    <p>Milik almarhum Tuan Richard</p>
                </div>
                <div class="note" data-location="dining">
                    <h3>Ruang Makan</h3>
                    <p>Tempat makan malam berlangsung</p>
                </div>
                <div class="note" data-location="garden">
                    <h3>Taman</h3>
                    <p>Area luar mansion</p>
                </div>
            </div>
            <button id="to-suspects-btn" class="btn">Wawancara Tersangka</button>
            <button id="to-accuse-btn" class="btn">Buat Kesimpulan</button>
        </div>
        
        <!-- Layar Tersangka -->
        <div id="suspects-screen" class="game-screen">
            <h2>Wawancara Tersangka</h2>
            <div class="note-container">
                <div class="character" data-suspect="emily">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIyNSIgZmlsbD0iI2Y5YzZjNyIvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMzAiIHI9IjUiIGZpbGw9IiMzMzMiLz48Y2lyY2xlIGN4PSI2MCIgY3k9IjMwIiByPSI1IiBmaWxsPSIjMzMzIi8+PHBhdGggZD0iTTQwIDQ1IHEyMCAxNSA0MCAwIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0yMCA3MCBxMTAgNDAgNjAgNDAgcTIwIDAgNDAgLTEwIiBzdHJva2U9IiNmOWNmYzciIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==" class="character-img" alt="Emily">
                    <h3>Emily</h3>
                    <p>Istri Almarhum</p>
                </div>
                <div class="character" data-suspect="john">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIyNSIgZmlsbD0iI2E3ZDRmMyIvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMzAiIHI9IjUiIGZpbGw9IiMzMzMiLz48Y2lyY2xlIGN4PSI2MCIgY3k9IjMwIiByPSI1IiBmaWxsPSIjMzMzIi8+PHBhdGggZD0iTTQwIDQ1IHEyMCAxMCA0MCAwIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0yMCA3MCBxMTAgNDAgNjAgNDAgcTIwIDAgNDAgLTEwIiBzdHJva2U9IiNhN2Q0ZjMiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0zNSA0MCBxLTUgMTUgMCAyMCIgc3Ryb2tlPSIjMzMzIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=" class="character-img" alt="John">
                    <h3>John</h3>
                    <p>Putra Almarhum</p>
                </div>
                <div class="character" data-suspect="sarah">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIyNSIgZmlsbD0iI2ZmZDc4YyIvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMzAiIHI9IjUiIGZpbGw9IiMzMzMiLz48Y2lyY2xlIGN4PSI2MCIgY3k9IjMwIiByPSI1IiBmaWxsPSIjMzMzIi8+PHBhdGggZD0iTTQwIDQ1IHEyMCAxNSA0MCAwIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0yMCA3MCBxMTAgNDAgNjAgNDAgcTIwIDAgNDAgLTEwIiBzdHJva2U9IiNmZmQ3OGMiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik00NSA1NSBxMTAgLTUgMTAgMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzMzIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=" class="character-img" alt="Sarah">
                    <h3>Sarah</h3>
                    <p>Asisten Rumah Tangga</p>
                </div>
                <div class="character" data-suspect="david">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIyNSIgZmlsbD0iI2NjZGY2YyIvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMzAiIHI9IjUiIGZpbGw9IiMzMzMiLz48Y2lyY2xlIGN4PSI2MCIgY3k9IjMwIiByPSI1IiBmaWxsPSIjMzMzIi8+PHBhdGggZD0iTTQwIDQ1IHEyMCA1IDQwIDAiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIzIiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTIwIDcwIHExMCA0MCA2MCA0MCBxMjAgMCA0MCAtMTAiIHN0cm9rZT0iI2NjZGY2YyIgc3Ryb2tlLXdpZHRoPSIzIiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTM1IDQ1IHEtNSAxNSAwIDIwIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGQ9Ik02NSA0NSBxNSAxNSAwIDIwIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg==" class="character-img" alt="David">
                    <h3>David</h3>
                    <p>Rekan Bisnis</p>
                </div>
            </div>
            <button id="to-locations-btn" class="btn">Selidiki Lokasi</button>
            <button id="to-accuse-from-suspects" class="btn">Buat Kesimpulan</button>
        </div>
        
        <!-- Layar Dialog -->
        <div id="dialog-screen" class="game-screen">
            <h2 id="dialog-character-name">Wawancara</h2>
            <div class="dialog-box">
                <p id="dialog-text">Halo, Detektif. Ada yang bisa saya bantu?</p>
                <div class="dialog-options" id="dialog-options">
                    <!-- Opsi dialog akan dimasukkan di sini oleh JavaScript -->
                </div>
            </div>
            <button id="end-dialog-btn" class="btn">Kembali ke Daftar Tersangka</button>
        </div>
        
        <!-- Layar Investigasi -->
        <div id="investigate-screen" class="game-screen">
            <h2 id="location-name">Investigasi Lokasi</h2>
            <div id="location-description">
                <p>Anda sedang memeriksa lokasi ini. Apa yang ingin Anda lakukan?</p>
            </div>
            <div id="investigation-options">
                <!-- Opsi investigasi akan dimasukkan di sini oleh JavaScript -->
            </div>
            <button id="back-to-locations" class="btn">Kembali ke Daftar Lokasi</button>
        </div>
        
        <!-- Layar Bukti -->
        <div id="clues-screen" class="game-screen">
            <h2>Bukti yang Dikumpulkan</h2>
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
            </div>
            <ul class="clue-list" id="clue-list">
                <!-- Daftar bukti akan dimasukkan di sini oleh JavaScript -->
            </ul>
            <button id="back-from-clues" class="btn">Kembali</button>
        </div>
        
        <!-- Layar Kesimpulan -->
        <div id="accuse-screen" class="game-screen">
            <h2>Buat Kesimpulan</h2>
            <p>Setelah mengumpulkan semua bukti, siapa menurut Anda pelakunya?</p>
            
            <label for="suspect-select">Pilih Tersangka:</label>
            <select id="suspect-select">
                <option value="">-- Pilih Tersangka --</option>
                <option value="emily">Emily (Istri)</option>
                <option value="john">John (Putra)</option>
                <option value="sarah">Sarah (Asisten Rumah Tangga)</option>
                <option value="david">David (Rekan Bisnis)</option>
            </select>
            
            <label for="motive-text">Jelaskan Motif:</label>
            <textarea id="motive-text" rows="4" placeholder="Mengapa dia melakukan pembunuhan?"></textarea>
            
            <label for="evidence-text">Jelaskan Bukti:</label>
            <textarea id="evidence-text" rows="4" placeholder="Bukti apa yang mendukung kesimpulan Anda?"></textarea>
            
            <button id="submit-accusation" class="btn">Ajukan Kesimpulan</button>
            <button id="back-from-accuse" class="btn">Kembali</button>
        </div>
        
        <!-- Layar Hasil -->
        <div id="result-screen" class="game-screen">
            <h2 id="result-title">Hasil Investigasi</h2>
            <div id="result-content">
                <p>Terima kasih telah menyelesaikan investigasi.</p>
            </div>
            <button id="restart-btn" class="btn">Main Lagi</button>
        </div>
    </div>

    <script>
        // Data game
        const gameData = {
            currentScreen: 'welcome',
            collectedClues: [],
            currentCharacter: null,
            currentLocation: null,
            conversationsHad: {
                emily: false,
                john: false,
                sarah: false,
                david: false
            },
            locationsVisited: {
                library: false,
                study: false,
                dining: false,
                garden: false
            },
            culprit: 'john', // John adalah pelakunya
            solution: {
                motive: "John membunuh ayahnya karena mengetahui bahwa ayahnya akan mengubah wasiat dan memberikan seluruh warisan kepada yayasan amal, meninggalkan John tanpa apapun.",
                evidence: [
                    "Surat wasiat baru yang disembunyikan di laci meja kerja",
                    "Pesan teks pada ponsel John yang mengancam ayahnya",
                    "Sidik jari John pada gagang pisau yang menjadi senjata pembunuh",
                    "John adalah satu-satunya yang tidak memiliki alibi yang kuat"
                ]
            },
            characters: {
                emily: {
                    name: "Emily",
                    relationship: "Istri Almarhum",
                    dialogs: [
                        {
                            question: "Di mana Anda ketika pembunuhan terjadi?",
                            answer: "Saya sedang di kamar tidur. Saya mendengar suara berisik dari perpustakaan tapi mengira itu hanya Richard yang sedang bekerja."
                        },
                        {
                            question: "Bagaimana hubungan Anda dengan almarhum?",
                            answer: "Kami sudah menikah 25 tahun. Hubungan kami baik-baik saja, meskipun akhir-akhir ini Richard sangat sibuk dengan bisnisnya."
                        },
                        {
                            question: "Apakah Anda mengetahui adanya ancaman terhadap suami Anda?",
                            answer: "Tidak secara langsung. Tapi saya tahu David, rekannya, marah karena Richard menolak proposal bisnisnya minggu lalu."
                        }
                    ]
                },
                john: {
                    name: "John",
                    relationship: "Putra Almarhum",
                    dialogs: [
                        {
                            question: "Di mana Anda ketika pembunuhan terjadi?",
                            answer: "Saya... eh... sedang keluar untuk berjalan-jalan. Saya butuh udara segar setelah makan malam."
                        },
                        {
                            question: "Bagaimana hubungan Anda dengan ayah Anda?",
                            answer: "Hubungan kami baik. Dia terkadang keras kepala, tapi itu demi kebaikan saya juga."
                        },
                        {
                            question: "Apakah Anda mengetahui masalah keuangan ayah Anda?",
                            answer: "Tidak, bisnisnya selalu baik-baik saja. Setahu saya tidak ada masalah keuangan."
                        }
                    ]
                },
                sarah: {
                    name: "Sarah",
                    relationship: "Asisten Rumah Tangga",
                    dialogs: [
                        {
                            question: "Di mana Anda ketika pembunuhan terjadi?",
                            answer: "Saya sedang membersihkan dapur. Saya mendengar suara berdebat dari perpustakaan sekitar setengah jam sebelum tubuhnya ditemukan."
                        },
                        {
                            question: "Suara siapa yang Anda dengar?",
                            answer: "Saya mendengar suara Tuan Richard dan seseorang yang lain. Tapi suara itu teredam, saya tidak yakin siapa itu."
                        },
                        {
                            question: "Apakah Anda melihat sesuatu yang mencurigakan?",
                            answer: "Saya melihat John berjalan cepat menuju taman sekitar 15 menit sebelum tubuh ditemukan. Dia terlihat gelisah."
                        }
                    ]
                },
                david: {
                    name: "David",
                    relationship: "Rekan Bisnis",
                    dialogs: [
                        {
                            question: "Apa yang Anda lakukan di mansion malam ini?",
                            answer: "Richard mengundang saya untuk makan malam untuk membahas proyek baru kami."
                        },
                        {
                            question: "Bagaimana kondisi bisnis Anda dan almarhum?",
                            answer: "Kami memiliki beberapa perbedaan pendapat akhir-akhir ini, tapi tidak ada yang serius."
                        },
                        {
                            question: "Apakah Anda memiliki alibi?",
                            answer: "Saya berada di ruang tamu bersama Emily setelah makan malam sampai tubuh Richard ditemukan."
                        }
                    ]
                }
            },
            locations: {
                library: {
                    name: "Perpustakaan",
                    description: "Ruangan yang elegan dengan rak buku dari lantai ke langit-langit. Mayat Richard ditemukan di sini, di dekat perapian. Ada buku-buku berserakan di lantai.",
                    clues: [
                        {
                            name: "Pisau Berdarah",
                            description: "Pisau dengan sidik jari pada gagangnya. Darah di ujungnya sudah mengering.",
                            found: false
                        },
                        {
                            name: "Potret Keluarga Robek",
                            description: "Potret keluarga yang robek menjadi dua, separuhnya hilang.",
                            found: false
                        }
                    ]
                },
                study: {
                    name: "Ruang Kerja",
                    description: "Ruangan yang berantakan dengan dokumen berserakan di mana-mana. Meja kerjanya penuh dengan korespondensi bisnis.",
                    clues: [
                        {
                            name: "Surat Wasiat",
                            description: "Surat wasiat baru yang menyatakan seluruh harta Richard akan disumbangkan kepada yayasan amal.",
                            found: false
                        },
                        {
                            name: "Pesan Ancaman",
                            description: "Cetakan pesan teks yang berisi ancaman: 'Ayah akan menyesali keputusannya'.",
                            found: false
                        }
                    ]
                },
                dining: {
                    name: "Ruang Makan",
                    description: "Meja makan besar masih berisi sisa-sisa makanan dan minuman dari makan malam. Ada empat kursi yang terlihat telah digunakan.",
                    clues: [
                        {
                            name: "Gelas Anggur",
                            description: "Gelas anggur dengan sisa obat tidur di dasar gelas. Hanya satu gelas yang mengandung obat.",
                            found: false
                        },
                        {
                            name: "Buku Harian",
                            description: "Buku harian pribadi Richard yang tersembunyi di balik vas. Catatan terakhir tentang kekhawatiran akan keselamatannya.",
                            found: false
                        }
                    ]
                },
                garden: {
                    name: "Taman",
                    description: "Taman besar dengan kolam ikan dan beberapa bangku. Penerangan cukup redup di malam hari.",
                    clues: [
                        {
                            name: "Jejak Kaki",
                            description: "Jejak kaki berlumpur menuju ke jendela perpustakaan. Ukurannya cocok dengan sepatu pria.",
                            found: false
                        },
                        {
                            name: "Kancing Baju",
                            description: "Kancing baju yang tergeletak di dekat semak mawar. Cocok dengan kancing yang dipakai John malam ini.",
                            found: false
                        }
                    ]
                }
            }
        };

        // Elemen DOM
        const screens = {
            welcome: document.getElementById('welcome-screen'),
            location: document.getElementById('location-screen'),
            suspects: document.getElementById('suspects-screen'),
            dialog: document.getElementById('dialog-screen'),
            investigate: document.getElementById('investigate-screen'),
            clues: document.getElementById('clues-screen'),
            accuse: document.getElementById('accuse-screen'),
            result: document.getElementById('result-screen')
        };

        // Inisialisasi game
        function initGame() {
            // Event listeners untuk navigasi
            document.getElementById('start-btn').addEventListener('click', () => showScreen('location'));
            document.getElementById('to-suspects-btn').addEventListener('click', () => showScreen('suspects'));
            document.getElementById('to-accuse-btn').addEventListener('click', () => showScreen('accuse'));
            document.getElementById('to-locations-btn').addEventListener('click', () => showScreen('location'));
            document.getElementById('to-accuse-from-suspects').addEventListener('click', () => showScreen('accuse'));
            document.getElementById('back-from-clues').addEventListener('click', () => showScreen(gameData.currentScreen));
            document.getElementById('back-from-accuse').addEventListener('click', () => showScreen('location'));
            document.getElementById('end-dialog-btn').addEventListener('click', () => showScreen('suspects'));
            document.getElementById('back-to-locations').addEventListener('click', () => showScreen('location'));
            document.getElementById('submit-accusation').addEventListener('click', checkAccusation);
            document.getElementById('restart-btn').addEventListener('click', restartGame);
            
            // Event listeners untuk karakter
            document.querySelectorAll('.character').forEach(el => {
                el.addEventListener('click', () => {
                    const suspect = el.getAttribute('data-suspect');
                    startConversation(suspect);
                });
            });
            
            // Event listeners untuk lokasi
            document.querySelectorAll('.note[data-location]').forEach(el => {
                el.addEventListener('click', () => {
                    const location = el.getAttribute('data-location');
                    investigateLocation(location);
                });
            });
            
            // Event listener untuk tombol bukti
            document.getElementById('clues-btn')?.addEventListener('click', () => {
                showCluesScreen();
            });
            
            // Perbarui progress bar
            updateProgressBar();
        }

        // Tampilkan layar tertentu
        function showScreen(screenName) {
            // Sembunyikan semua layar
            Object.values(screens).forEach(screen => {
                screen.style.display = 'none';
            });
            
            // Tampilkan layar yang diminta
            screens[screenName].style.display = 'block';
            gameData.currentScreen = screenName;
            
            // Jika layar bukti, perbarui daftar bukti
            if (screenName === 'clues') {
                updateCluesList();
            }
        }

        // Mulai percakapan dengan karakter
        function startConversation(suspectId) {
            gameData.currentCharacter = suspectId;
            const character = gameData.characters[suspectId];
            
            // Set nama karakter di dialog
            document.getElementById('dialog-character-name').textContent = `Wawancara dengan ${character.name}`;
            
            // Kosongkan opsi dialog
            const optionsContainer = document.getElementById('dialog-options');
            optionsContainer.innerHTML = '';
            
            // Tambahkan opsi dialog
            character.dialogs.forEach(dialog => {
                const optionEl = document.createElement('div');
                optionEl.className = 'dialog-option';
                optionEl.textContent = dialog.question;
                optionEl.addEventListener('click', () => {
                    document.getElementById('dialog-text').textContent = dialog.answer;
                    
                    // Jika ini pertama kalinya berbicara dengan karakter ini, dapatkan petunjuk
                    if (!gameData.conversationsHad[suspectId]) {
                        gameData.conversationsHad[suspectId] = true;
                        
                        // Berikan petunjuk khusus berdasarkan karakter
                        let newClue = '';
                        if (suspectId === 'emily') {
                            newClue = 'Emily menyebutkan bahwa David marah kepada Richard';
                        } else if (suspectId === 'sarah') {
                            newClue = 'Sarah melihat John berjalan cepat ke taman sebelum pembunuhan';
                        } else if (suspectId === 'david') {
                            newClue = 'David mengaku berada di ruang tamu bersama Emily sepanjang waktu';
                        }
                        
                        if (newClue && !gameData.collectedClues.includes(newClue)) {
                            gameData.collectedClues.push(newClue);
                            updateProgressBar();
                        }
                    }
                });
                
                optionsContainer.appendChild(optionEl);
            });
            
            showScreen('dialog');
        }

        // Investigasi lokasi
        function investigateLocation(locationId) {
            gameData.currentLocation = locationId;
            const location = gameData.locations[locationId];
            
            // Set nama lokasi
            document.getElementById('location-name').textContent = `Menyelidiki: ${location.name}`;
            
            // Set deskripsi lokasi
            document.getElementById('location-description').innerHTML = `<p>${location.description}</p>`;
            
            // Kosongkan opsi investigasi
            const optionsContainer = document.getElementById('investigation-options');
            optionsContainer.innerHTML = '';
            
            // Tambahkan opsi investigasi berdasarkan petunjuk yang tersedia
            location.clues.forEach((clue, index) => {
                if (!clue.found) {
                    const optionEl = document.createElement('div');
                    optionEl.className = 'dialog-option';
                    optionEl.textContent = `Periksa: ${clue.name}`;
                    optionEl.addEventListener('click', () => {
                        // Tandai petunjuk sebagai ditemukan
                        gameData.locations[locationId].clues[index].found = true;
                        
                        // Tambahkan ke koleksi petunjuk
                        gameData.collectedClues.push(`${clue.name}: ${clue.description}`);
                        
                        // Perbarui UI
                        updateProgressBar();
                        optionEl.style.display = 'none';
                        
                        // Tandai lokasi telah dikunjungi
                        gameData.locationsVisited[locationId] = true;
                    });
                    
                    optionsContainer.appendChild(optionEl);
                }
            });
            
            showScreen('investigate');
        }

        // Perbarui daftar bukti
        function updateCluesList() {
            const cluesList = document.getElementById('clue-list');
            cluesList.innerHTML = '';
            
            gameData.collectedClues.forEach(clue => {
                const li = document.createElement('li');
                li.textContent = clue;
                cluesList.appendChild(li);
            });
        }

        // Perbarui progress bar
        function updateProgressBar() {
            const totalClues = 12; // Total semua petunjuk yang mungkin
            const progress = (gameData.collectedClues.length / totalClues) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        // Periksa kesimpulan pemain
        function checkAccusation() {
            const selectedSuspect = document.getElementById('suspect-select').value;
            const motive = document.getElementById('motive-text').value;
            const evidence = document.getElementById('evidence-text').value;
            
            if (!selectedSuspect || !motive || !evidence) {
                alert('Harap isi semua field sebelum mengajukan kesimpulan!');
                return;
            }
            
            // Tampilkan layar hasil
            showScreen('result');
            
            if (selectedSuspect === gameData.culprit) {
                document.getElementById('result-title').textContent = 'Selamat! Kasus Terpecahkan';
                document.getElementById('result-content').innerHTML = `
                    <p>Anda benar! ${gameData.characters[gameData.culprit].name} adalah pembunuhnya.</p>
                    <p><strong>Motif:</strong> ${gameData.solution.motive}</p>
                    <p><strong>Bukti-bukti:</strong></p>
                    <ul>
                        ${gameData.solution.evidence.map(ev => `<li>${ev}</li>`).join('')}
                    </ul>
                    <p>Anda berhasil mengumpulkan ${gameData.collectedClues.length} dari 12 bukti yang mungkin.</p>
                `;
            } else {
                document.getElementById('result-title').textContent = 'Kesimpulan Salah';
                document.getElementById('result-content').innerHTML = `
                    <p>Maaf, kesimpulan Anda salah. ${gameData.characters[selectedSuspect].name} bukan pembunuhnya.</p>
                    <p>Silakan main lagi dan periksa bukti-bukti dengan lebih cermat.</p>
                    <p>Anda mengumpulkan ${gameData.collectedClues.length} dari 12 bukti yang mungkin.</p>
                `;
            }
        }

        // Mulai ulang game
        function restartGame() {
            // Reset semua data game
            gameData.collectedClues = [];
            gameData.currentCharacter = null;
            gameData.currentLocation = null;
            
            // Reset semua percakapan
            for (let key in gameData.conversationsHad) {
                gameData.conversationsHad[key] = false;
            }
            
            // Reset semua kunjungan lokasi
            for (let key in gameData.locationsVisited) {
                gameData.locationsVisited[key] = false;
            }
            
            // Reset semua petunjuk di lokasi
            for (let location in gameData.locations) {
                gameData.locations[location].clues.forEach(clue => {
                    clue.found = false;
                });
            }
            
            // Reset form kesimpulan
            document.getElementById('suspect-select').value = '';
            document.getElementById('motive-text').value = '';
            document.getElementById('evidence-text').value = '';
            
            // Kembali ke layar welcome
            showScreen('welcome');
            
            // Perbarui progress bar
            updateProgressBar();
        }

        // Inisialisasi game ketika halaman dimuat
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>